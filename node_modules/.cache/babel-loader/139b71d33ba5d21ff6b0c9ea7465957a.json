{"ast":null,"code":"import _createClass from\"C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";// import logo from './logo.svg';\nimport{Typography}from'@mui/material';import'./App.css';// import './first';\n// import wrtc from 'wrtc';\nimport React from'react';import io from'socket.io-client';import{Setup,State,setModel,getId,setRoom,Peers,JoinRoomButton}from'react-simple-peer';// import { startClient, gotData } from './client';\n// import { Box } from '@mui/system';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var User=/*#__PURE__*/_createClass(function User(username){_classCallCheck(this,User);this.username=void 0;this.username=username;});function handleOfferRequest(processOfferRequest,socket){socket.on('offer-request',function(request){return processOfferRequest(request);});console.log(\"Received offer-response\");}function _emitOfferResponse(joinRequest,signalData,socket){socket.emit('offer-response',joinRequest,signalData);console.log(\"Send offer-response\");}function handleJoinResponse(processJoinResponse,socket){socket.on('join-response',function(offer,id,roomCreatorId){return processJoinResponse(offer,id,'AZE',roomCreatorId);});console.log(\"Received join-response\");}function emitJoinResponse(signalData,room,recievedId,id,socket){socket.emit('join-ack',{offer:signalData,roomId:room,peerId:recievedId},id);console.log(\"Join-ack send\");}function handleClientOffer(processClientOffer,socket){socket.on('client-offer',function(data,peerId,sessionInitiator,emitterPeerId){return processClientOffer(data,peerId,sessionInitiator,emitterPeerId);});console.log(\"Received client-offer\");}function _emitInitiatorOffers(offers,id,room,socket){socket.emit('initiator-offers',offers,id,room);console.log(\"Sends initiator-offer :)\");}function handleLeaving(processLeaving,socket){socket.on('leaving',function(id){return processLeaving(id);});console.log(\"I'm leaving\");}function App(){var ws=io('http://192.168.21.1:3000');return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Setup// Wrapper around OfferRequest event listener that provides processing callback for that request.\n,{onOfferRequest:function onOfferRequest(processOfferRequest){return handleOfferRequest(processOfferRequest,ws);}// Wrapper around OfferRequest event emitter that provides both JoinRequest and SignalingData objects.\n,emitOfferResponse:function emitOfferResponse(joinRequest,signalData){return _emitOfferResponse(joinRequest,signalData,ws);}// Wrapper around JoinResponse event listener that provides processing callback for that response.\n,onJoinResponse:function onJoinResponse(processJoinResponse){return handleJoinResponse(processJoinResponse,ws);}// Wrapper around JoinAck event emitter that provides SignalingData as well as room id, received peer id and self peer id.\n,emitJoinAck:function emitJoinAck(signalData,room,recievedId,id){return emitJoinResponse(signalData,room,recievedId,id,ws);}// Wrapper around clientOffer event listener that provides processing callback for that offer.\n,onClientOffer:function onClientOffer(processClientOffer){return handleClientOffer(processClientOffer,ws);}// Wrapper around InitiatorOffers event emitter that provides list of offers, self id and room id.\n,emitInitiatorOffers:function emitInitiatorOffers(offers,id,room){return _emitInitiatorOffers(offers,id,room,ws);}// Wrapper around leaving event listener that provides processing callback for that leaving peer.\n,onLeaving:function onLeaving(processLeaving){return handleLeaving(processLeaving,ws);},children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(event){return setModel(new User(event.target.value));}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"State : \",/*#__PURE__*/_jsx(State,{})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){var roomId='myroom';var room={initiatorPeerId:getId(),roomId:roomId};setRoom(roomId);console.log(roomId);ws.emit('create',room);console.log(\"you tried to create a room\");},children:\"Create a room\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setRoom('myroom');ws.emit('join-request',{roomId:'AZE',peerId:getId()});console.log(\"peerID: \"+getId());console.log(\"you tried to join a room\");},children:\"Join a room\"}),/*#__PURE__*/_jsx(JoinRoomButton,{room:\"42\",join:function join(){return 42;},className:\"Henry\",children:/*#__PURE__*/_jsx(Typography,{children:\"Hello\"})}),/*#__PURE__*/_jsx(Peers,{children:function children(peers){return/*#__PURE__*/_jsx(\"ul\",{children:Array.from(peers).map(function(set){return/*#__PURE__*/_jsx(\"li\",{children:set[1].username},set[1].username);})});}})]})})})});}export default App;","map":{"version":3,"names":["Typography","React","io","Setup","State","setModel","getId","setRoom","Peers","JoinRoomButton","User","username","handleOfferRequest","processOfferRequest","socket","on","request","console","log","emitOfferResponse","joinRequest","signalData","emit","handleJoinResponse","processJoinResponse","offer","id","roomCreatorId","emitJoinResponse","room","recievedId","roomId","peerId","handleClientOffer","processClientOffer","data","sessionInitiator","emitterPeerId","emitInitiatorOffers","offers","handleLeaving","processLeaving","App","ws","event","target","value","initiatorPeerId","peers","Array","from","map","set"],"sources":["C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/src/App.tsx"],"sourcesContent":["// import logo from './logo.svg';\r\nimport { Grid, Paper, Typography, Button, TextField } from '@mui/material';\r\nimport './App.css';\r\n// import './first';\r\n// import wrtc from 'wrtc';\r\nimport ReactDOM from 'react-dom/client';\r\nimport React from 'react';\r\nimport { SignalData } from 'simple-peer';\r\nimport io from 'socket.io-client';\r\nimport {\r\n  Setup,\r\n  JoinRequest,\r\n  ClientOffer,\r\n  State,\r\n  setModel,\r\n  getId,\r\n  setRoom,\r\n  Peers,\r\n  JoinRoomButton,\r\n  PeerVideo\r\n} from 'react-simple-peer';\r\n// import { startClient, gotData } from './client';\r\n// import { Box } from '@mui/system';\r\n\r\n\r\nclass User {\r\n  username: string;\r\n\r\n  constructor(username: string) {\r\n    this.username = username;\r\n  }\r\n\r\n}\r\n\r\nfunction handleOfferRequest(processOfferRequest: any, socket: any) {\r\n  socket.on('offer-request', (request: JoinRequest) => processOfferRequest(request));\r\n  console.log(\"Received offer-response\")\r\n}\r\n\r\nfunction emitOfferResponse(joinRequest: JoinRequest, signalData: SignalData, socket: any) {\r\n  socket.emit('offer-response', joinRequest, signalData);\r\n  console.log(\"Send offer-response\")\r\n}\r\n\r\nfunction handleJoinResponse(processJoinResponse: any, socket: any) {\r\n  socket.on('join-response', (offer: SignalData, id: string, roomCreatorId: string) => processJoinResponse(offer, id, 'AZE', roomCreatorId))\r\n  console.log(\"Received join-response\")\r\n}\r\n\r\nfunction emitJoinResponse(signalData: SignalData, room: string, recievedId: string, id: string, socket: any) {\r\n  socket.emit('join-ack', { offer: signalData, roomId: room, peerId: recievedId }, id);\r\n  console.log(\"Join-ack send\")\r\n}\r\n\r\nfunction handleClientOffer(processClientOffer: any, socket: any) {\r\n  socket.on('client-offer', (data: ClientOffer, peerId: string, sessionInitiator: boolean, emitterPeerId: string) => processClientOffer(data, peerId, sessionInitiator, emitterPeerId));\r\n  console.log(\"Received client-offer\")\r\n}\r\n\r\nfunction emitInitiatorOffers(offers: any, id: string, room: string, socket: any) {\r\n  socket.emit('initiator-offers', offers, id, room);\r\n  console.log(\"Sends initiator-offer :)\")\r\n}\r\n\r\nfunction handleLeaving(processLeaving: (id: string) => void, socket: any) {\r\n  socket.on('leaving', (id: string) => processLeaving(id));\r\n  console.log(\"I'm leaving\")\r\n}\r\n\r\n\r\nfunction App(): JSX.Element {\r\n\r\n  const ws = io('http://192.168.21.1:3000');\r\n\r\n  return (\r\n    <>\r\n      <Setup\r\n        // Wrapper around OfferRequest event listener that provides processing callback for that request.\r\n        onOfferRequest={(processOfferRequest: any) => handleOfferRequest(processOfferRequest, ws)}\r\n\r\n        // Wrapper around OfferRequest event emitter that provides both JoinRequest and SignalingData objects.\r\n        emitOfferResponse={(joinRequest: JoinRequest, signalData: SignalData) => emitOfferResponse(joinRequest, signalData, ws)}\r\n\r\n        // Wrapper around JoinResponse event listener that provides processing callback for that response.\r\n        onJoinResponse={(processJoinResponse: any) => handleJoinResponse(processJoinResponse, ws)}\r\n\r\n        // Wrapper around JoinAck event emitter that provides SignalingData as well as room id, received peer id and self peer id.\r\n        emitJoinAck={(signalData: SignalData, room, recievedId, id) => emitJoinResponse(signalData, room, recievedId, id, ws)}\r\n\r\n        // Wrapper around clientOffer event listener that provides processing callback for that offer.\r\n        onClientOffer={(processClientOffer: any) => handleClientOffer(processClientOffer, ws)}\r\n\r\n        // Wrapper around InitiatorOffers event emitter that provides list of offers, self id and room id.\r\n        emitInitiatorOffers={(offers, id, room) => emitInitiatorOffers(offers, id, room, ws)}\r\n\r\n        // Wrapper around leaving event listener that provides processing callback for that leaving peer.\r\n        onLeaving={(processLeaving: (id: string) => void) => handleLeaving(processLeaving, ws)}\r\n      >\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n\r\n            <input type=\"text\" onChange={event => setModel(new User(event.target.value))} />\r\n\r\n            <p>\r\n              State : <State />\r\n            </p>\r\n\r\n            <button onClick={() => {\r\n              const roomId = 'myroom';\r\n              const room = { initiatorPeerId: getId(), roomId: roomId };\r\n              setRoom(roomId);\r\n              console.log(roomId);\r\n              ws.emit('create', room);\r\n              console.log(\"you tried to create a room\")\r\n            }}>Create a room\r\n            </button>\r\n\r\n            <button onClick={() => {\r\n              setRoom('myroom');\r\n              ws.emit('join-request', { roomId: 'AZE', peerId: getId() });\r\n              console.log(\"peerID: \" + getId())\r\n              console.log(\"you tried to join a room\")\r\n            }}>Join a room\r\n            </button>\r\n\r\n            <JoinRoomButton room='42' join={() => 42} className=\"Henry\">\r\n              <Typography>Hello</Typography>\r\n            </JoinRoomButton>\r\n\r\n            <Peers>\r\n              {\r\n                peers => {\r\n                  return <ul>\r\n                    {Array.from<any>(peers).map((set: [string, User]) => <li\r\n                      key={set[1].username}>{set[1].username}</li>)}\r\n                  </ul>\r\n                }\r\n              }\r\n            </Peers>\r\n          </header>\r\n        </div>\r\n      </Setup>\r\n      {/* <div className=\"App\">\r\n      <Box padding={4}>\r\n        <Paper elevation={2}>\r\n          <Grid container alignItems={\"center\"} justifyContent={\"center\"} padding={2}>\r\n            <Grid item xs={6}>\r\n              <Typography>This is a fuckign website</Typography>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Typography>Where u can upload fuckign picutes</Typography>\r\n            </Grid>\r\n            <Grid item marginTop={4} xs={10}>\r\n              This could be a thing\r\n            </Grid>\r\n            <Grid item marginTop={4} xs={\"auto\"}>\r\n              <Button onClick={() => startClient()}> connect </Button>\r\n            </Grid>\r\n            {/* <Grid item marginTop={4} xs={\"auto\"}>\r\n              <Button onClick={()=> startServer()}> start </Button>\r\n            </Grid> */}\r\n      {/* <Grid>\r\n              <Typography>{showReceivedData()}</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField id=\"standard-basic\" label=\"Standard\" variant=\"standard\" />\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n      </Box> */}\r\n      {/* <header className=\"App-header\"> */}\r\n      {/* <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        <p>\r\n          Edit <code>src/App.tsx</code> and save to reload.\r\n        </p>\r\n        <a\r\n          className=\"App-link\"\r\n          href=\"https://reactjs.org\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Learn React\r\n        </a> */}\r\n      {/* <Typography>Welcome</Typography> */}\r\n      {/* </header> */}\r\n      {/* </div> */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}