{"ast":null,"code":"import { asyncScheduler } from '../scheduler/async';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function debounceTime(dueTime, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = asyncScheduler;\n  }\n  return operate(function (source, subscriber) {\n    var activeTask = null;\n    var lastValue = null;\n    var lastTime = null;\n    var emit = function () {\n      if (activeTask) {\n        activeTask.unsubscribe();\n        activeTask = null;\n        var value = lastValue;\n        lastValue = null;\n        subscriber.next(value);\n      }\n    };\n    function emitWhenIdle() {\n      var targetTime = lastTime + dueTime;\n      var now = scheduler.now();\n      if (now < targetTime) {\n        activeTask = this.schedule(undefined, targetTime - now);\n        subscriber.add(activeTask);\n        return;\n      }\n      emit();\n    }\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      lastValue = value;\n      lastTime = scheduler.now();\n      if (!activeTask) {\n        activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n        subscriber.add(activeTask);\n      }\n    }, function () {\n      emit();\n      subscriber.complete();\n    }, undefined, function () {\n      lastValue = activeTask = null;\n    }));\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,cAAc,QAAQ,oBAAoB;AAGnD,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,wBAAwB,QAAQ,sBAAsB;AA2D/D,OAAM,SAAUC,YAAY,CAAIC,OAAe,EAAEC,SAAyC;EAAzC;IAAAA,0BAAyC;EAAA;EACxF,OAAOJ,OAAO,CAAC,UAACK,MAAM,EAAEC,UAAU;IAChC,IAAIC,UAAU,GAAwB,IAAI;IAC1C,IAAIC,SAAS,GAAa,IAAI;IAC9B,IAAIC,QAAQ,GAAkB,IAAI;IAElC,IAAMC,IAAI,GAAG;MACX,IAAIH,UAAU,EAAE;QAEdA,UAAU,CAACI,WAAW,EAAE;QACxBJ,UAAU,GAAG,IAAI;QACjB,IAAMK,KAAK,GAAGJ,SAAU;QACxBA,SAAS,GAAG,IAAI;QAChBF,UAAU,CAACO,IAAI,CAACD,KAAK,CAAC;;IAE1B,CAAC;IACD,SAASE,YAAY;MAInB,IAAMC,UAAU,GAAGN,QAAS,GAAGN,OAAO;MACtC,IAAMa,GAAG,GAAGZ,SAAS,CAACY,GAAG,EAAE;MAC3B,IAAIA,GAAG,GAAGD,UAAU,EAAE;QAEpBR,UAAU,GAAG,IAAI,CAACU,QAAQ,CAACC,SAAS,EAAEH,UAAU,GAAGC,GAAG,CAAC;QACvDV,UAAU,CAACa,GAAG,CAACZ,UAAU,CAAC;QAC1B;;MAGFG,IAAI,EAAE;IACR;IAEAL,MAAM,CAACe,SAAS,CACdnB,wBAAwB,CACtBK,UAAU,EACV,UAACM,KAAQ;MACPJ,SAAS,GAAGI,KAAK;MACjBH,QAAQ,GAAGL,SAAS,CAACY,GAAG,EAAE;MAG1B,IAAI,CAACT,UAAU,EAAE;QACfA,UAAU,GAAGH,SAAS,CAACa,QAAQ,CAACH,YAAY,EAAEX,OAAO,CAAC;QACtDG,UAAU,CAACa,GAAG,CAACZ,UAAU,CAAC;;IAE9B,CAAC,EACD;MAGEG,IAAI,EAAE;MACNJ,UAAU,CAACe,QAAQ,EAAE;IACvB,CAAC,EAEDH,SAAS,EACT;MAEEV,SAAS,GAAGD,UAAU,GAAG,IAAI;IAC/B,CAAC,CACF,CACF;EACH,CAAC,CAAC;AACJ","names":["asyncScheduler","operate","createOperatorSubscriber","debounceTime","dueTime","scheduler","source","subscriber","activeTask","lastValue","lastTime","emit","unsubscribe","value","next","emitWhenIdle","targetTime","now","schedule","undefined","add","subscribe","complete"],"sources":["../../../../src/internal/operators/debounceTime.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}