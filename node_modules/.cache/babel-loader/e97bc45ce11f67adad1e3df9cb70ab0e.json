{"ast":null,"code":"import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function skipLast(skipCount) {\n  return skipCount <= 0 ? identity : operate(function (source, subscriber) {\n    var ring = new Array(skipCount);\n    var seen = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      var valueIndex = seen++;\n      if (valueIndex < skipCount) {\n        ring[valueIndex] = value;\n      } else {\n        var index = valueIndex % skipCount;\n        var oldValue = ring[index];\n        ring[index] = value;\n        subscriber.next(oldValue);\n      }\n    }));\n    return function () {\n      ring = null;\n    };\n  });\n}","map":{"version":3,"mappings":"AACA,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,wBAAwB,QAAQ,sBAAsB;AA4C/D,OAAM,SAAUC,QAAQ,CAAIC,SAAiB;EAC3C,OAAOA,SAAS,IAAI,CAAC,GAEjBJ,QAAQ,GACRC,OAAO,CAAC,UAACI,MAAM,EAAEC,UAAU;IAIzB,IAAIC,IAAI,GAAQ,IAAIC,KAAK,CAACJ,SAAS,CAAC;IAGpC,IAAIK,IAAI,GAAG,CAAC;IACZJ,MAAM,CAACK,SAAS,CACdR,wBAAwB,CAACI,UAAU,EAAE,UAACK,KAAK;MAKzC,IAAMC,UAAU,GAAGH,IAAI,EAAE;MACzB,IAAIG,UAAU,GAAGR,SAAS,EAAE;QAI1BG,IAAI,CAACK,UAAU,CAAC,GAAGD,KAAK;OACzB,MAAM;QAIL,IAAME,KAAK,GAAGD,UAAU,GAAGR,SAAS;QAGpC,IAAMU,QAAQ,GAAGP,IAAI,CAACM,KAAK,CAAC;QAC5BN,IAAI,CAACM,KAAK,CAAC,GAAGF,KAAK;QAKnBL,UAAU,CAACS,IAAI,CAACD,QAAQ,CAAC;;IAE7B,CAAC,CAAC,CACH;IAED,OAAO;MAELP,IAAI,GAAG,IAAK;IACd,CAAC;EACH,CAAC,CAAC;AACR","names":["identity","operate","createOperatorSubscriber","skipLast","skipCount","source","subscriber","ring","Array","seen","subscribe","value","valueIndex","index","oldValue","next"],"sources":["../../../../src/internal/operators/skipLast.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}