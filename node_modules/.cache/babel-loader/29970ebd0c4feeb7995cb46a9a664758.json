{"ast":null,"code":"const max = 65536;\nconst cache = {};\n\n// in node 6 Buffer.subarray returns a Uint8Array instead of a Buffer\n// later versions return a Buffer\n// alternative is Buffer.slice but that creates a new buffer\n// creating new buffers takes time\n// SubOk is only false on node < 8\nconst SubOk = Buffer.isBuffer(Buffer.from([1, 2]).subarray(0, 1));\nfunction generateBuffer(i) {\n  const buffer = Buffer.allocUnsafe(2);\n  buffer.writeUInt8(i >> 8, 0);\n  buffer.writeUInt8(i & 0x00FF, 0 + 1);\n  return buffer;\n}\nfunction generateCache() {\n  for (let i = 0; i < max; i++) {\n    cache[i] = generateBuffer(i);\n  }\n}\nfunction genBufVariableByteInt(num) {\n  const maxLength = 4; // max 4 bytes\n  let digit = 0;\n  let pos = 0;\n  const buffer = Buffer.allocUnsafe(maxLength);\n  do {\n    digit = num % 128 | 0;\n    num = num / 128 | 0;\n    if (num > 0) digit = digit | 0x80;\n    buffer.writeUInt8(digit, pos++);\n  } while (num > 0 && pos < maxLength);\n  if (num > 0) {\n    pos = 0;\n  }\n  return SubOk ? buffer.subarray(0, pos) : buffer.slice(0, pos);\n}\nfunction generate4ByteBuffer(num) {\n  const buffer = Buffer.allocUnsafe(4);\n  buffer.writeUInt32BE(num, 0);\n  return buffer;\n}\nmodule.exports = {\n  cache,\n  generateCache,\n  generateNumber: generateBuffer,\n  genBufVariableByteInt,\n  generate4ByteBuffer\n};","map":{"version":3,"names":["max","cache","SubOk","Buffer","isBuffer","from","subarray","generateBuffer","i","buffer","allocUnsafe","writeUInt8","generateCache","genBufVariableByteInt","num","maxLength","digit","pos","slice","generate4ByteBuffer","writeUInt32BE","module","exports","generateNumber"],"sources":["C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/mqtt-packet/numbers.js"],"sourcesContent":["const max = 65536\nconst cache = {}\n\n// in node 6 Buffer.subarray returns a Uint8Array instead of a Buffer\n// later versions return a Buffer\n// alternative is Buffer.slice but that creates a new buffer\n// creating new buffers takes time\n// SubOk is only false on node < 8\nconst SubOk = Buffer.isBuffer(Buffer.from([1, 2]).subarray(0, 1))\n\nfunction generateBuffer (i) {\n  const buffer = Buffer.allocUnsafe(2)\n  buffer.writeUInt8(i >> 8, 0)\n  buffer.writeUInt8(i & 0x00FF, 0 + 1)\n\n  return buffer\n}\n\nfunction generateCache () {\n  for (let i = 0; i < max; i++) {\n    cache[i] = generateBuffer(i)\n  }\n}\n\nfunction genBufVariableByteInt (num) {\n  const maxLength = 4 // max 4 bytes\n  let digit = 0\n  let pos = 0\n  const buffer = Buffer.allocUnsafe(maxLength)\n\n  do {\n    digit = num % 128 | 0\n    num = num / 128 | 0\n    if (num > 0) digit = digit | 0x80\n\n    buffer.writeUInt8(digit, pos++)\n  } while (num > 0 && pos < maxLength)\n\n  if (num > 0) {\n    pos = 0\n  }\n\n  return SubOk ? buffer.subarray(0, pos) : buffer.slice(0, pos)\n}\n\nfunction generate4ByteBuffer (num) {\n  const buffer = Buffer.allocUnsafe(4)\n  buffer.writeUInt32BE(num, 0)\n  return buffer\n}\n\nmodule.exports = {\n  cache,\n  generateCache,\n  generateNumber: generateBuffer,\n  genBufVariableByteInt,\n  generate4ByteBuffer\n}\n"],"mappings":"AAAA,MAAMA,GAAG,GAAG,KAAK;AACjB,MAAMC,KAAK,GAAG,CAAC,CAAC;;AAEhB;AACA;AACA;AACA;AACA;AACA,MAAMC,KAAK,GAAGC,MAAM,CAACC,QAAQ,CAACD,MAAM,CAACE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAEjE,SAASC,cAAc,CAAEC,CAAC,EAAE;EAC1B,MAAMC,MAAM,GAAGN,MAAM,CAACO,WAAW,CAAC,CAAC,CAAC;EACpCD,MAAM,CAACE,UAAU,CAACH,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;EAC5BC,MAAM,CAACE,UAAU,CAACH,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC;EAEpC,OAAOC,MAAM;AACf;AAEA,SAASG,aAAa,GAAI;EACxB,KAAK,IAAIJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,GAAG,EAAEQ,CAAC,EAAE,EAAE;IAC5BP,KAAK,CAACO,CAAC,CAAC,GAAGD,cAAc,CAACC,CAAC,CAAC;EAC9B;AACF;AAEA,SAASK,qBAAqB,CAAEC,GAAG,EAAE;EACnC,MAAMC,SAAS,GAAG,CAAC,EAAC;EACpB,IAAIC,KAAK,GAAG,CAAC;EACb,IAAIC,GAAG,GAAG,CAAC;EACX,MAAMR,MAAM,GAAGN,MAAM,CAACO,WAAW,CAACK,SAAS,CAAC;EAE5C,GAAG;IACDC,KAAK,GAAGF,GAAG,GAAG,GAAG,GAAG,CAAC;IACrBA,GAAG,GAAGA,GAAG,GAAG,GAAG,GAAG,CAAC;IACnB,IAAIA,GAAG,GAAG,CAAC,EAAEE,KAAK,GAAGA,KAAK,GAAG,IAAI;IAEjCP,MAAM,CAACE,UAAU,CAACK,KAAK,EAAEC,GAAG,EAAE,CAAC;EACjC,CAAC,QAAQH,GAAG,GAAG,CAAC,IAAIG,GAAG,GAAGF,SAAS;EAEnC,IAAID,GAAG,GAAG,CAAC,EAAE;IACXG,GAAG,GAAG,CAAC;EACT;EAEA,OAAOf,KAAK,GAAGO,MAAM,CAACH,QAAQ,CAAC,CAAC,EAAEW,GAAG,CAAC,GAAGR,MAAM,CAACS,KAAK,CAAC,CAAC,EAAED,GAAG,CAAC;AAC/D;AAEA,SAASE,mBAAmB,CAAEL,GAAG,EAAE;EACjC,MAAML,MAAM,GAAGN,MAAM,CAACO,WAAW,CAAC,CAAC,CAAC;EACpCD,MAAM,CAACW,aAAa,CAACN,GAAG,EAAE,CAAC,CAAC;EAC5B,OAAOL,MAAM;AACf;AAEAY,MAAM,CAACC,OAAO,GAAG;EACfrB,KAAK;EACLW,aAAa;EACbW,cAAc,EAAEhB,cAAc;EAC9BM,qBAAqB;EACrBM;AACF,CAAC"},"metadata":{},"sourceType":"script"}