{"ast":null,"code":"import { Subject } from '../Subject';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function retryWhen(notifier) {\n  return operate(function (source, subscriber) {\n    var innerSub;\n    var syncResub = false;\n    var errors$;\n    var subscribeForRetryWhen = function () {\n      innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function (err) {\n        if (!errors$) {\n          errors$ = new Subject();\n          notifier(errors$).subscribe(createOperatorSubscriber(subscriber, function () {\n            return innerSub ? subscribeForRetryWhen() : syncResub = true;\n          }));\n        }\n        if (errors$) {\n          errors$.next(err);\n        }\n      }));\n      if (syncResub) {\n        innerSub.unsubscribe();\n        innerSub = null;\n        syncResub = false;\n        subscribeForRetryWhen();\n      }\n    };\n    subscribeForRetryWhen();\n  });\n}","map":{"version":3,"mappings":"AACA,SAASA,OAAO,QAAQ,YAAY;AAIpC,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,wBAAwB,QAAQ,sBAAsB;AAyD/D,OAAM,SAAUC,SAAS,CAAIC,QAAsD;EACjF,OAAOH,OAAO,CAAC,UAACI,MAAM,EAAEC,UAAU;IAChC,IAAIC,QAA6B;IACjC,IAAIC,SAAS,GAAG,KAAK;IACrB,IAAIC,OAAqB;IAEzB,IAAMC,qBAAqB,GAAG;MAC5BH,QAAQ,GAAGF,MAAM,CAACM,SAAS,CACzBT,wBAAwB,CAACI,UAAU,EAAEM,SAAS,EAAEA,SAAS,EAAE,UAACC,GAAG;QAC7D,IAAI,CAACJ,OAAO,EAAE;UACZA,OAAO,GAAG,IAAIT,OAAO,EAAE;UACvBI,QAAQ,CAACK,OAAO,CAAC,CAACE,SAAS,CACzBT,wBAAwB,CAACI,UAAU,EAAE;YAMnC,eAAQ,GAAGI,qBAAqB,EAAE,GAAIF,SAAS,GAAG,IAAK;UAAvD,CAAuD,CACxD,CACF;;QAEH,IAAIC,OAAO,EAAE;UAEXA,OAAO,CAACK,IAAI,CAACD,GAAG,CAAC;;MAErB,CAAC,CAAC,CACH;MAED,IAAIL,SAAS,EAAE;QAKbD,QAAQ,CAACQ,WAAW,EAAE;QACtBR,QAAQ,GAAG,IAAI;QAEfC,SAAS,GAAG,KAAK;QAEjBE,qBAAqB,EAAE;;IAE3B,CAAC;IAGDA,qBAAqB,EAAE;EACzB,CAAC,CAAC;AACJ","names":["Subject","operate","createOperatorSubscriber","retryWhen","notifier","source","subscriber","innerSub","syncResub","errors$","subscribeForRetryWhen","subscribe","undefined","err","next","unsubscribe"],"sources":["../../../../src/internal/operators/retryWhen.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}