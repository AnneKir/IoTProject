{"ast":null,"code":"'use strict';\n\nconst inherits = require('inherits');\nconst Buffer = require('safer-buffer').Buffer;\nconst Node = require('../base/node');\n\n// Import DER constants\nconst der = require('../constants/der');\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\nmodule.exports = DEREncoder;\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  Node.call(this, 'der', parent);\n}\ninherits(DERNode, Node);\nDERNode.prototype._encodeComposite = function encodeComposite(tag, primitive, cls, content) {\n  const encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    const header = Buffer.alloc(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([header, content]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  let lenOctets = 1;\n  for (let i = content.length; i >= 0x100; i >>= 8) lenOctets++;\n  const header = Buffer.alloc(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n  for (let i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8) header[i] = j & 0xff;\n  return this._createEncoderBuffer([header, content]);\n};\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([str.unused | 0, str.data]);\n  } else if (tag === 'bmpstr') {\n    const buf = Buffer.alloc(str.length * 2);\n    for (let i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' + 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' + 'only latin upper and lower case letters, ' + 'digits, space, apostrophe, left and rigth ' + 'parenthesis, plus sign, comma, hyphen, ' + 'dot, slash, colon, equal sign, ' + 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag + ' unsupported');\n  }\n};\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values) return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id)) return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s.]+/g);\n    for (let i = 0; i < id.length; i++) id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (let i = 0; i < id.length; i++) id[i] |= 0;\n  }\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' + 'got: ' + JSON.stringify(id));\n  }\n  if (!relative) {\n    if (id[1] >= 40) return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  let size = 0;\n  for (let i = 0; i < id.length; i++) {\n    let ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7) size++;\n  }\n  const objid = Buffer.alloc(size);\n  let offset = objid.length - 1;\n  for (let i = id.length - 1; i >= 0; i--) {\n    let ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0) objid[offset--] = 0x80 | ident & 0x7f;\n  }\n  return this._createEncoderBuffer(objid);\n};\nfunction two(num) {\n  if (num < 10) return '0' + num;else return num;\n}\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  let str;\n  const date = new Date(time);\n  if (tag === 'gentime') {\n    str = [two(date.getUTCFullYear()), two(date.getUTCMonth() + 1), two(date.getUTCDate()), two(date.getUTCHours()), two(date.getUTCMinutes()), two(date.getUTCSeconds()), 'Z'].join('');\n  } else if (tag === 'utctime') {\n    str = [two(date.getUTCFullYear() % 100), two(date.getUTCMonth() + 1), two(date.getUTCDate()), two(date.getUTCHours()), two(date.getUTCMinutes()), two(date.getUTCSeconds()), 'Z'].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n  return this._encodeStr(str, 'octstr');\n};\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values) return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' + JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    const numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = Buffer.from(numArray);\n  }\n  if (Buffer.isBuffer(num)) {\n    let size = num.length;\n    if (num.length === 0) size++;\n    const out = Buffer.alloc(size);\n    num.copy(out);\n    if (num.length === 0) out[0] = 0;\n    return this._createEncoderBuffer(out);\n  }\n  if (num < 0x80) return this._createEncoderBuffer(num);\n  if (num < 0x100) return this._createEncoderBuffer([0, num]);\n  let size = 1;\n  for (let i = num; i >= 0x100; i >>= 8) size++;\n  const out = new Array(size);\n  for (let i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if (out[0] & 0x80) {\n    out.unshift(0);\n  }\n  return this._createEncoderBuffer(Buffer.from(out));\n};\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function') entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  const state = this._baseState;\n  let i;\n  if (state['default'] === null) return false;\n  const data = dataBuffer.join();\n  if (state.defaultBuffer === undefined) state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n  if (data.length !== state.defaultBuffer.length) return false;\n  for (i = 0; i < data.length; i++) if (data[i] !== state.defaultBuffer[i]) return false;\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  let res;\n  if (tag === 'seqof') tag = 'seq';else if (tag === 'setof') tag = 'set';\n  if (der.tagByName.hasOwnProperty(tag)) res = der.tagByName[tag];else if (typeof tag === 'number' && (tag | 0) === tag) res = tag;else return reporter.error('Unknown tag: ' + tag);\n  if (res >= 0x1f) return reporter.error('Multi-octet tag encoding unsupported');\n  if (!primitive) res |= 0x20;\n  res |= der.tagClassByName[cls || 'universal'] << 6;\n  return res;\n}","map":{"version":3,"names":["inherits","require","Buffer","Node","der","DEREncoder","entity","enc","name","tree","DERNode","_init","body","module","exports","prototype","encode","data","reporter","_encode","join","parent","call","_encodeComposite","encodeComposite","tag","primitive","cls","content","encodedTag","encodeTag","length","header","alloc","_createEncoderBuffer","lenOctets","i","j","_encodeStr","encodeStr","str","unused","buf","writeUInt16BE","charCodeAt","_isNumstr","error","_isPrintstr","test","_encodeObjid","encodeObjid","id","values","relative","hasOwnProperty","split","Array","isArray","slice","JSON","stringify","splice","size","ident","objid","offset","two","num","_encodeTime","encodeTime","time","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_encodeNull","encodeNull","_encodeInt","encodeInt","isBuffer","numArray","toArray","sign","unshift","from","out","copy","_encodeBool","encodeBool","value","_use","use","obj","_getEncoder","_skipDefault","skipDefault","dataBuffer","state","_baseState","defaultBuffer","undefined","_encodeValue","res","tagByName","tagClassByName"],"sources":["C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/asn1.js/lib/asn1/encoders/der.js"],"sourcesContent":["'use strict';\r\n\r\nconst inherits = require('inherits');\r\nconst Buffer = require('safer-buffer').Buffer;\r\nconst Node = require('../base/node');\r\n\r\n// Import DER constants\r\nconst der = require('../constants/der');\r\n\r\nfunction DEREncoder(entity) {\r\n  this.enc = 'der';\r\n  this.name = entity.name;\r\n  this.entity = entity;\r\n\r\n  // Construct base tree\r\n  this.tree = new DERNode();\r\n  this.tree._init(entity.body);\r\n}\r\nmodule.exports = DEREncoder;\r\n\r\nDEREncoder.prototype.encode = function encode(data, reporter) {\r\n  return this.tree._encode(data, reporter).join();\r\n};\r\n\r\n// Tree methods\r\n\r\nfunction DERNode(parent) {\r\n  Node.call(this, 'der', parent);\r\n}\r\ninherits(DERNode, Node);\r\n\r\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\r\n  primitive,\r\n  cls,\r\n  content) {\r\n  const encodedTag = encodeTag(tag, primitive, cls, this.reporter);\r\n\r\n  // Short form\r\n  if (content.length < 0x80) {\r\n    const header = Buffer.alloc(2);\r\n    header[0] = encodedTag;\r\n    header[1] = content.length;\r\n    return this._createEncoderBuffer([ header, content ]);\r\n  }\r\n\r\n  // Long form\r\n  // Count octets required to store length\r\n  let lenOctets = 1;\r\n  for (let i = content.length; i >= 0x100; i >>= 8)\r\n    lenOctets++;\r\n\r\n  const header = Buffer.alloc(1 + 1 + lenOctets);\r\n  header[0] = encodedTag;\r\n  header[1] = 0x80 | lenOctets;\r\n\r\n  for (let i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\r\n    header[i] = j & 0xff;\r\n\r\n  return this._createEncoderBuffer([ header, content ]);\r\n};\r\n\r\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\r\n  if (tag === 'bitstr') {\r\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\r\n  } else if (tag === 'bmpstr') {\r\n    const buf = Buffer.alloc(str.length * 2);\r\n    for (let i = 0; i < str.length; i++) {\r\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\r\n    }\r\n    return this._createEncoderBuffer(buf);\r\n  } else if (tag === 'numstr') {\r\n    if (!this._isNumstr(str)) {\r\n      return this.reporter.error('Encoding of string type: numstr supports ' +\r\n                                 'only digits and space');\r\n    }\r\n    return this._createEncoderBuffer(str);\r\n  } else if (tag === 'printstr') {\r\n    if (!this._isPrintstr(str)) {\r\n      return this.reporter.error('Encoding of string type: printstr supports ' +\r\n                                 'only latin upper and lower case letters, ' +\r\n                                 'digits, space, apostrophe, left and rigth ' +\r\n                                 'parenthesis, plus sign, comma, hyphen, ' +\r\n                                 'dot, slash, colon, equal sign, ' +\r\n                                 'question mark');\r\n    }\r\n    return this._createEncoderBuffer(str);\r\n  } else if (/str$/.test(tag)) {\r\n    return this._createEncoderBuffer(str);\r\n  } else if (tag === 'objDesc') {\r\n    return this._createEncoderBuffer(str);\r\n  } else {\r\n    return this.reporter.error('Encoding of string type: ' + tag +\r\n                               ' unsupported');\r\n  }\r\n};\r\n\r\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\r\n  if (typeof id === 'string') {\r\n    if (!values)\r\n      return this.reporter.error('string objid given, but no values map found');\r\n    if (!values.hasOwnProperty(id))\r\n      return this.reporter.error('objid not found in values map');\r\n    id = values[id].split(/[\\s.]+/g);\r\n    for (let i = 0; i < id.length; i++)\r\n      id[i] |= 0;\r\n  } else if (Array.isArray(id)) {\r\n    id = id.slice();\r\n    for (let i = 0; i < id.length; i++)\r\n      id[i] |= 0;\r\n  }\r\n\r\n  if (!Array.isArray(id)) {\r\n    return this.reporter.error('objid() should be either array or string, ' +\r\n                               'got: ' + JSON.stringify(id));\r\n  }\r\n\r\n  if (!relative) {\r\n    if (id[1] >= 40)\r\n      return this.reporter.error('Second objid identifier OOB');\r\n    id.splice(0, 2, id[0] * 40 + id[1]);\r\n  }\r\n\r\n  // Count number of octets\r\n  let size = 0;\r\n  for (let i = 0; i < id.length; i++) {\r\n    let ident = id[i];\r\n    for (size++; ident >= 0x80; ident >>= 7)\r\n      size++;\r\n  }\r\n\r\n  const objid = Buffer.alloc(size);\r\n  let offset = objid.length - 1;\r\n  for (let i = id.length - 1; i >= 0; i--) {\r\n    let ident = id[i];\r\n    objid[offset--] = ident & 0x7f;\r\n    while ((ident >>= 7) > 0)\r\n      objid[offset--] = 0x80 | (ident & 0x7f);\r\n  }\r\n\r\n  return this._createEncoderBuffer(objid);\r\n};\r\n\r\nfunction two(num) {\r\n  if (num < 10)\r\n    return '0' + num;\r\n  else\r\n    return num;\r\n}\r\n\r\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\r\n  let str;\r\n  const date = new Date(time);\r\n\r\n  if (tag === 'gentime') {\r\n    str = [\r\n      two(date.getUTCFullYear()),\r\n      two(date.getUTCMonth() + 1),\r\n      two(date.getUTCDate()),\r\n      two(date.getUTCHours()),\r\n      two(date.getUTCMinutes()),\r\n      two(date.getUTCSeconds()),\r\n      'Z'\r\n    ].join('');\r\n  } else if (tag === 'utctime') {\r\n    str = [\r\n      two(date.getUTCFullYear() % 100),\r\n      two(date.getUTCMonth() + 1),\r\n      two(date.getUTCDate()),\r\n      two(date.getUTCHours()),\r\n      two(date.getUTCMinutes()),\r\n      two(date.getUTCSeconds()),\r\n      'Z'\r\n    ].join('');\r\n  } else {\r\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\r\n  }\r\n\r\n  return this._encodeStr(str, 'octstr');\r\n};\r\n\r\nDERNode.prototype._encodeNull = function encodeNull() {\r\n  return this._createEncoderBuffer('');\r\n};\r\n\r\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\r\n  if (typeof num === 'string') {\r\n    if (!values)\r\n      return this.reporter.error('String int or enum given, but no values map');\r\n    if (!values.hasOwnProperty(num)) {\r\n      return this.reporter.error('Values map doesn\\'t contain: ' +\r\n                                 JSON.stringify(num));\r\n    }\r\n    num = values[num];\r\n  }\r\n\r\n  // Bignum, assume big endian\r\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\r\n    const numArray = num.toArray();\r\n    if (!num.sign && numArray[0] & 0x80) {\r\n      numArray.unshift(0);\r\n    }\r\n    num = Buffer.from(numArray);\r\n  }\r\n\r\n  if (Buffer.isBuffer(num)) {\r\n    let size = num.length;\r\n    if (num.length === 0)\r\n      size++;\r\n\r\n    const out = Buffer.alloc(size);\r\n    num.copy(out);\r\n    if (num.length === 0)\r\n      out[0] = 0;\r\n    return this._createEncoderBuffer(out);\r\n  }\r\n\r\n  if (num < 0x80)\r\n    return this._createEncoderBuffer(num);\r\n\r\n  if (num < 0x100)\r\n    return this._createEncoderBuffer([0, num]);\r\n\r\n  let size = 1;\r\n  for (let i = num; i >= 0x100; i >>= 8)\r\n    size++;\r\n\r\n  const out = new Array(size);\r\n  for (let i = out.length - 1; i >= 0; i--) {\r\n    out[i] = num & 0xff;\r\n    num >>= 8;\r\n  }\r\n  if(out[0] & 0x80) {\r\n    out.unshift(0);\r\n  }\r\n\r\n  return this._createEncoderBuffer(Buffer.from(out));\r\n};\r\n\r\nDERNode.prototype._encodeBool = function encodeBool(value) {\r\n  return this._createEncoderBuffer(value ? 0xff : 0);\r\n};\r\n\r\nDERNode.prototype._use = function use(entity, obj) {\r\n  if (typeof entity === 'function')\r\n    entity = entity(obj);\r\n  return entity._getEncoder('der').tree;\r\n};\r\n\r\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\r\n  const state = this._baseState;\r\n  let i;\r\n  if (state['default'] === null)\r\n    return false;\r\n\r\n  const data = dataBuffer.join();\r\n  if (state.defaultBuffer === undefined)\r\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\r\n\r\n  if (data.length !== state.defaultBuffer.length)\r\n    return false;\r\n\r\n  for (i=0; i < data.length; i++)\r\n    if (data[i] !== state.defaultBuffer[i])\r\n      return false;\r\n\r\n  return true;\r\n};\r\n\r\n// Utility methods\r\n\r\nfunction encodeTag(tag, primitive, cls, reporter) {\r\n  let res;\r\n\r\n  if (tag === 'seqof')\r\n    tag = 'seq';\r\n  else if (tag === 'setof')\r\n    tag = 'set';\r\n\r\n  if (der.tagByName.hasOwnProperty(tag))\r\n    res = der.tagByName[tag];\r\n  else if (typeof tag === 'number' && (tag | 0) === tag)\r\n    res = tag;\r\n  else\r\n    return reporter.error('Unknown tag: ' + tag);\r\n\r\n  if (res >= 0x1f)\r\n    return reporter.error('Multi-octet tag encoding unsupported');\r\n\r\n  if (!primitive)\r\n    res |= 0x20;\r\n\r\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\r\n\r\n  return res;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}