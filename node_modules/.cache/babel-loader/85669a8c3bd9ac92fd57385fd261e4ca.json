{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar orderClause_1 = require(\"./orderClause\");\nvar no_decorator_exception_1 = require(\"../exceptions/no-decorator-exception\");\nvar __1 = require(\"..\");\nvar select_1 = require(\"./select/select\");\nvar order_by_1 = require(\"./order-by/order-by\");\nvar group_by_1 = require(\"./group-by/group-by\");\nvar TsQ = /*#__PURE__*/function () {\n  function TsQ() {\n    _classCallCheck(this, TsQ);\n    this._orderby = new __1.Stack();\n  }\n  _createClass(TsQ, [{\n    key: \"select\",\n    value: function select() {\n      for (var _len = arguments.length, fields = new Array(_len), _key = 0; _key < _len; _key++) {\n        fields[_key] = arguments[_key];\n      }\n      this._select = select_1.select(fields, this._from, this._method);\n      return this;\n    }\n  }, {\n    key: \"where\",\n    value: function where(f) {\n      this._where = f;\n      return this;\n    }\n  }, {\n    key: \"order_by\",\n    value: function order_by(field) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'asc';\n      this._orderby.stack(new orderClause_1.OrderClause(field, direction));\n      return this;\n    }\n  }, {\n    key: \"group_by\",\n    value: function group_by(field) {\n      this._groupby = field;\n      return this;\n    }\n  }, {\n    key: \"fetch\",\n    value: function fetch() {\n      this.fromProcess().whereProcess().orderByProcess().selectProcess().groupByProcess();\n      return this._from;\n    }\n    /**\r\n     * Gets the data from class based on decorator configuration.\r\n     */\n  }, {\n    key: \"fromProcess\",\n    value: function fromProcess() {\n      this._from = this._from[this._method]();\n      return this;\n    }\n    /**\r\n     * Filters data according to the calback provided in \"where\" clause.\r\n     */\n  }, {\n    key: \"whereProcess\",\n    value: function whereProcess() {\n      if (this._where) this._from = this._from.filter(this._where);\n      return this;\n    }\n    /**\r\n     * Orders data\r\n     */\n  }, {\n    key: \"orderByProcess\",\n    value: function orderByProcess() {\n      this._from = order_by_1.orderBy(this._from, this._orderby);\n      return this;\n    }\n    /**\r\n     * Filters on provided fields list\r\n     */\n  }, {\n    key: \"selectProcess\",\n    value: function selectProcess() {\n      if (this._select) {\n        this._from = select_1.selectFilter(this._from, this._select);\n        this._select = null;\n      }\n      return this;\n    }\n    /**\r\n     * Groups data by provided groups list\r\n     */\n  }, {\n    key: \"groupByProcess\",\n    value: function groupByProcess() {\n      if (this._groupby) this._from = group_by_1.groupBy(this._from, this._groupby);\n      return this;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(_from) {\n      var tsq = new TsQ();\n      tsq._from = _from;\n      try {\n        tsq._method = _from.prototype._tsq_conf;\n      } catch (e) {\n        throw new no_decorator_exception_1.NoDecoratorException('TsQ decorator is missing from class ' + _from.constructor.name);\n      }\n      return tsq;\n    }\n  }]);\n  return TsQ;\n}();\nexports.TsQ = TsQ;","map":{"version":3,"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAA4C,IAE5CA;EAUI;IAAA;IACI,IAAI,CAACC,QAAQ,GAAG,IAAIC,SAAK,EAAe;EAC5C;EAAC;IAAA;IAAA,OAEM,kBAAuB;MAAA,kCAAbC,MAAa;QAAbA,MAAa;MAAA;MAC1B,IAAI,CAACC,OAAO,GAAGC,eAAM,CAACF,MAAM,EAAE,IAAI,CAACG,KAAK,EAAE,IAAI,CAACC,OAAO,CAAC;MACvD,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OAaM,eAAMC,CAAsB;MAC/B,IAAI,CAACC,MAAM,GAAGD,CAAC;MACf,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OAEM,kBAASE,KAAa,EAA2B;MAAA,IAAzBC,gFAAoB,KAAK;MACpD,IAAI,CAACV,QAAQ,CAACW,KAAK,CAAC,IAAIC,yBAAW,CAACH,KAAK,EAAEC,SAAS,CAAC,CAAC;MACtD,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OAEM,kBAASD,KAAa;MACzB,IAAI,CAACI,QAAQ,GAAGJ,KAAK;MACrB,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OAEM,iBAAK;MACR,IAAI,CACCK,WAAW,EAAE,CACbC,YAAY,EAAE,CACdC,cAAc,EAAE,CAChBC,aAAa,EAAE,CACfC,cAAc,EAAE;MAErB,OAAO,IAAI,CAACb,KAAK;IACrB;IAEA;;;EAAA;IAAA;IAAA,OAGQ,uBAAW;MACf,IAAI,CAACA,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC,IAAI,CAACC,OAAO,CAAC,EAAE;MACvC,OAAO,IAAI;IACf;IAEA;;;EAAA;IAAA;IAAA,OAGQ,wBAAY;MAChB,IAAI,IAAI,CAACE,MAAM,EACX,IAAI,CAACH,KAAK,GAAG,IAAI,CAACA,KAAK,CAACc,MAAM,CAAC,IAAI,CAACX,MAAM,CAAC;MAC/C,OAAO,IAAI;IACf;IAEA;;;EAAA;IAAA;IAAA,OAGQ,0BAAc;MAClB,IAAI,CAACH,KAAK,GAAGe,kBAAO,CAAC,IAAI,CAACf,KAAK,EAAE,IAAI,CAACL,QAAQ,CAAC;MAC/C,OAAO,IAAI;IACf;IAEA;;;EAAA;IAAA;IAAA,OAGQ,yBAAa;MACjB,IAAI,IAAI,CAACG,OAAO,EAAE;QACd,IAAI,CAACE,KAAK,GAAGD,qBAAY,CAAC,IAAI,CAACC,KAAK,EAAE,IAAI,CAACF,OAAO,CAAC;QACnD,IAAI,CAACA,OAAO,GAAG,IAAI;;MAGvB,OAAO,IAAI;IACf;IAEA;;;EAAA;IAAA;IAAA,OAGQ,0BAAc;MAClB,IAAI,IAAI,CAACU,QAAQ,EACb,IAAI,CAACR,KAAK,GAAGgB,kBAAO,CAAC,IAAI,CAAChB,KAAK,EAAE,IAAI,CAACQ,QAAQ,CAAC;MAEnD,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OAlFM,cAAYS,KAAS;MACxB,IAAIC,GAAG,GAAQ,IAAIxB,GAAG,EAAE;MACxBwB,GAAG,CAAClB,KAAK,GAAGiB,KAAI;MAChB,IAAI;QACAC,GAAG,CAACjB,OAAO,GAAGgB,KAAI,CAACE,SAAS,CAACC,SAAS;OACzC,CAAC,OAAOC,CAAC,EAAE;QACR,MAAM,IAAIC,6CAAoB,CAAC,sCAAsC,GAAGL,KAAI,CAACM,WAAW,CAACC,IAAI,CAAC;;MAElG,OAAON,GAAG;IACd;EAAC;EAAA;AAAA;AA5BLO","names":["TsQ","_orderby","__1","fields","_select","select_1","_from","_method","f","_where","field","direction","stack","orderClause_1","_groupby","fromProcess","whereProcess","orderByProcess","selectProcess","groupByProcess","filter","order_by_1","group_by_1","from","tsq","prototype","_tsq_conf","e","no_decorator_exception_1","constructor","name","exports"],"sources":["../../src/tsQ/tsQ.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}