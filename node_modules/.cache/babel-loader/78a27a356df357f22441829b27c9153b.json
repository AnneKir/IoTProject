{"ast":null,"code":"import _createClass from\"C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";// import logo from './logo.svg';\nimport'./App.css';// import './first';\n// import wrtc from 'wrtc';\nimport React from'react';import io from'socket.io-client';import{Setup,State,setModel,getId,setRoom,Peers}from'react-simple-peer';// import { startServer } from './first';\n// import SimplePeerWrapper from 'simple-peer-wrapper';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";// import SimplePeerWrapper from 'simple-peer-wrapper';\n// import wrtc from 'wrtc';\n// const options = {\n//   serverUrl: 'http://localhost:8081',\n//   debugger: false,\n//   simplePeerOptions: {\n//     initiator: false,\n//     trickle: false,\n//     wrtc: wrtc\n//   }\n// };\n// const options2 = {\n//   serverUrl: 'http://localhost:8081',\n//   debugger: false,\n//   simplePeerOptions: {\n//     initiator: true,\n//     trickle: false,\n//     wrtc: wrtc\n//   }\n// };\n// type data = {\n//   id: string;\n//   data: object;\n// }\n// function rree() {\n//   const spw = new SimplePeerWrapper(options);\n//   console.log(\"ehek\")\n//   spw.connect();\n//   spw.on('connect', () => {\n//     console.log(\"conection\");\n//     spw.send(\"hej\");\n//   });\n//   spw.on('data', (data: data) => {\n//     console.log(data.data.toString());\n//   });\n// }\n// function first() {\n//   const spw = new SimplePeerWrapper(options2);\n//   console.log(\"eheooo\")\n//   spw.connect();\n//   spw.on('connect', () => {\n//     console.log(\"conection\");\n//     spw.send(\"heiij\");\n//   });\n//   spw.on('data', (data: data) => {\n//     console.log(data.data.toString());\n//   });\n//   spw.on('error', (err: Error) => console.log('error', err))\n// }\n// function gotData(data: Object) {\n//   // put the incoming data somewhere to use later\n//   let partnerMouse = data.data;\n//   console.log(\"got data: \" + partnerMouse.toString())\n// }\n// let count = 0;\n// function gotConnect(spw: SimplePeerWrapper) {\n//   console.log('peer connection open');\n//   count++;\n//   spw.send(\"hej\" + count.toString());\n// }\nvar User=/*#__PURE__*/_createClass(function User(username){_classCallCheck(this,User);this.username=void 0;this.username=username;});function App(){var ws=io('localhost:9000');return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Setup,{onOfferRequest:function onOfferRequest(processOfferRequest){ws.on('offer-request',function(request){return processOfferRequest(request);});},emitOfferResponse:function emitOfferResponse(joinRequest,signalData){ws.emit('offer-response',joinRequest,signalData);},onJoinResponse:function onJoinResponse(processJoinResponse){ws.on('join-response',function(offer,id,roomCreatorId){return processJoinResponse(offer,id,'AZE',roomCreatorId);});},emitJoinAck:function emitJoinAck(signalData,room,recievedId,id){ws.emit('join-ack',{offer:signalData,roomId:room,peerId:recievedId},id);},onClientOffer:function onClientOffer(processClientOffer){ws.on('client-offer',function(data,peerId,sessionInitiator,emitterPeerId){return processClientOffer(data,peerId,sessionInitiator,emitterPeerId);});},emitInitiatorOffers:function emitInitiatorOffers(offers,id,room){ws.emit('initiator-offers',offers,id,room);},onLeaving:function onLeaving(processLeaving){ws.on('leaving',function(id){return processLeaving(id);});},children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(event){return setModel(new User(event.target.value));}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"State : \",/*#__PURE__*/_jsx(State,{})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){var roomId='myroom';var room={initiatorPeerId:getId(),roomId:roomId};setRoom(roomId);ws.emit('create',room);},children:\"Create a room\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setRoom('myroom');ws.emit('join-request',{roomId:'AZE',peerId:getId()});},children:\"Join a room\"}),/*#__PURE__*/_jsx(Peers,{children:function children(peers){return/*#__PURE__*/_jsx(\"ul\",{children:Array.from(peers).map(function(set){return/*#__PURE__*/_jsx(\"li\",{children:set[1].username},set[1].username);})});}})]})})})});}export default App;","map":{"version":3,"names":["React","io","Setup","State","setModel","getId","setRoom","Peers","User","username","App","ws","processOfferRequest","on","request","joinRequest","signalData","emit","processJoinResponse","offer","id","roomCreatorId","room","recievedId","roomId","peerId","processClientOffer","data","sessionInitiator","emitterPeerId","offers","processLeaving","event","target","value","initiatorPeerId","peers","Array","from","map","set"],"sources":["C:/Users/Amali/Desktop/Building_the_IoT_w._P2P_and_Cloud_Computing/IoTProject/src/App.tsx"],"sourcesContent":["// import logo from './logo.svg';\r\nimport { Grid, Paper, Typography, Button, TextField } from '@mui/material';\r\nimport './App.css';\r\n// import './first';\r\n// import wrtc from 'wrtc';\r\nimport ReactDOM from 'react-dom/client';\r\nimport React from 'react';\r\nimport { SignalData } from 'simple-peer';\r\nimport io from 'socket.io-client';\r\nimport {\r\n  Setup,\r\n  JoinRequest,\r\n  ClientOffer,\r\n  State,\r\n  setModel,\r\n  getId,\r\n  setRoom,\r\n  Peers\r\n} from 'react-simple-peer';\r\n// import { startServer } from './first';\r\n// import SimplePeerWrapper from 'simple-peer-wrapper';\r\nimport { startClient, gotData } from './client';\r\nimport { Box } from '@mui/system';\r\n\r\n\r\n// import SimplePeerWrapper from 'simple-peer-wrapper';\r\n// import wrtc from 'wrtc';\r\n\r\n// const options = {\r\n//   serverUrl: 'http://localhost:8081',\r\n//   debugger: false,\r\n//   simplePeerOptions: {\r\n//     initiator: false,\r\n//     trickle: false,\r\n//     wrtc: wrtc\r\n//   }\r\n// };\r\n\r\n// const options2 = {\r\n//   serverUrl: 'http://localhost:8081',\r\n//   debugger: false,\r\n//   simplePeerOptions: {\r\n//     initiator: true,\r\n//     trickle: false,\r\n//     wrtc: wrtc\r\n//   }\r\n// };\r\n\r\n// type data = {\r\n//   id: string;\r\n//   data: object;\r\n// }\r\n\r\n// function rree() {\r\n//   const spw = new SimplePeerWrapper(options);\r\n//   console.log(\"ehek\")\r\n//   spw.connect();\r\n//   spw.on('connect', () => {\r\n//     console.log(\"conection\");\r\n//     spw.send(\"hej\");\r\n//   });\r\n//   spw.on('data', (data: data) => {\r\n//     console.log(data.data.toString());\r\n//   });\r\n\r\n// }\r\n\r\n// function first() {\r\n//   const spw = new SimplePeerWrapper(options2);\r\n//   console.log(\"eheooo\")\r\n//   spw.connect();\r\n//   spw.on('connect', () => {\r\n//     console.log(\"conection\");\r\n//     spw.send(\"heiij\");\r\n//   });\r\n//   spw.on('data', (data: data) => {\r\n//     console.log(data.data.toString());\r\n//   });\r\n//   spw.on('error', (err: Error) => console.log('error', err))\r\n\r\n// }\r\n\r\n\r\n// function gotData(data: Object) {\r\n//   // put the incoming data somewhere to use later\r\n//   let partnerMouse = data.data;\r\n//   console.log(\"got data: \" + partnerMouse.toString())\r\n// }\r\n\r\n// let count = 0;\r\n// function gotConnect(spw: SimplePeerWrapper) {\r\n//   console.log('peer connection open');\r\n//   count++;\r\n//   spw.send(\"hej\" + count.toString());\r\n// }\r\n\r\n\r\nclass User {\r\n  username: string;\r\n\r\n  constructor(username: string) {\r\n    this.username = username;\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction App(): JSX.Element {\r\n\r\n  const ws = io('localhost:9000');\r\n\r\n  return (\r\n    <>\r\n      <Setup\r\n        onOfferRequest={(processOfferRequest: any) => {\r\n          ws.on('offer-request', (request: JoinRequest) => processOfferRequest(request));\r\n        }}\r\n\r\n        emitOfferResponse={(joinRequest, signalData: SignalData) => {\r\n          ws.emit('offer-response', joinRequest, signalData);\r\n        }}\r\n\r\n        onJoinResponse={(processJoinResponse: any) => {\r\n          ws.on('join-response', (offer: SignalData, id: string, roomCreatorId: string) => processJoinResponse(offer, id, 'AZE', roomCreatorId))\r\n        }}\r\n\r\n        emitJoinAck={(signalData, room, recievedId, id) => {\r\n          ws.emit('join-ack', { offer: signalData, roomId: room, peerId: recievedId }, id);\r\n        }}\r\n\r\n        onClientOffer={(processClientOffer: any) => {\r\n          ws.on('client-offer', (data: ClientOffer, peerId: string, sessionInitiator: boolean, emitterPeerId: string) => processClientOffer(data, peerId, sessionInitiator, emitterPeerId));\r\n        }}\r\n\r\n        emitInitiatorOffers={(offers, id, room) => {\r\n          ws.emit('initiator-offers', offers, id, room);\r\n        }}\r\n\r\n        onLeaving={(processLeaving: (id: string) => void) => {\r\n          ws.on('leaving', (id: string) => processLeaving(id));\r\n        }}\r\n      >\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n\r\n            <input type=\"text\" onChange={event => setModel(new User(event.target.value))} />\r\n\r\n            <p>\r\n              State : <State />\r\n            </p>\r\n\r\n            <button onClick={() => {\r\n              const roomId = 'myroom';\r\n              const room = { initiatorPeerId: getId(), roomId: roomId };\r\n              setRoom(roomId);\r\n              ws.emit('create', room);\r\n            }}>Create a room\r\n            </button>\r\n\r\n            <button onClick={() => {\r\n              setRoom('myroom');\r\n              ws.emit('join-request', { roomId: 'AZE', peerId: getId() });\r\n            }}>Join a room\r\n            </button>\r\n\r\n            <Peers>\r\n              {\r\n                peers => {\r\n                  return <ul>\r\n                    {Array.from<any>(peers).map((set: [string, User]) => <li\r\n                      key={set[1].username}>{set[1].username}</li>)}\r\n                  </ul>\r\n                }\r\n              }\r\n            </Peers>\r\n          </header>\r\n        </div>\r\n      </Setup>\r\n      {/* <div className=\"App\">\r\n      <Box padding={4}>\r\n        <Paper elevation={2}>\r\n          <Grid container alignItems={\"center\"} justifyContent={\"center\"} padding={2}>\r\n            <Grid item xs={6}>\r\n              <Typography>This is a fuckign website</Typography>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Typography>Where u can upload fuckign picutes</Typography>\r\n            </Grid>\r\n            <Grid item marginTop={4} xs={10}>\r\n              This could be a thing\r\n            </Grid>\r\n            <Grid item marginTop={4} xs={\"auto\"}>\r\n              <Button onClick={() => startClient()}> connect </Button>\r\n            </Grid>\r\n            {/* <Grid item marginTop={4} xs={\"auto\"}>\r\n              <Button onClick={()=> startServer()}> start </Button>\r\n            </Grid> */}\r\n      {/* <Grid>\r\n              <Typography>{showReceivedData()}</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField id=\"standard-basic\" label=\"Standard\" variant=\"standard\" />\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n      </Box> */}\r\n      {/* <header className=\"App-header\"> */}\r\n      {/* <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        <p>\r\n          Edit <code>src/App.tsx</code> and save to reload.\r\n        </p>\r\n        <a\r\n          className=\"App-link\"\r\n          href=\"https://reactjs.org\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Learn React\r\n        </a> */}\r\n      {/* <Typography>Welcome</Typography> */}\r\n      {/* </header> */}\r\n      {/* </div> */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}