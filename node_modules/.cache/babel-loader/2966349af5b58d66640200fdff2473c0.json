{"ast":null,"code":"'use strict';\n\nconst DuplexStream = require('readable-stream').Duplex;\nconst inherits = require('inherits');\nconst BufferList = require('./BufferList');\nfunction BufferListStream(callback) {\n  if (!(this instanceof BufferListStream)) {\n    return new BufferListStream(callback);\n  }\n  if (typeof callback === 'function') {\n    this._callback = callback;\n    const piper = function piper(err) {\n      if (this._callback) {\n        this._callback(err);\n        this._callback = null;\n      }\n    }.bind(this);\n    this.on('pipe', function onPipe(src) {\n      src.on('error', piper);\n    });\n    this.on('unpipe', function onUnpipe(src) {\n      src.removeListener('error', piper);\n    });\n    callback = null;\n  }\n  BufferList._init.call(this, callback);\n  DuplexStream.call(this);\n}\ninherits(BufferListStream, DuplexStream);\nObject.assign(BufferListStream.prototype, BufferList.prototype);\nBufferListStream.prototype._new = function _new(callback) {\n  return new BufferListStream(callback);\n};\nBufferListStream.prototype._write = function _write(buf, encoding, callback) {\n  this._appendBuffer(buf);\n  if (typeof callback === 'function') {\n    callback();\n  }\n};\nBufferListStream.prototype._read = function _read(size) {\n  if (!this.length) {\n    return this.push(null);\n  }\n  size = Math.min(size, this.length);\n  this.push(this.slice(0, size));\n  this.consume(size);\n};\nBufferListStream.prototype.end = function end(chunk) {\n  DuplexStream.prototype.end.call(this, chunk);\n  if (this._callback) {\n    this._callback(null, this.slice());\n    this._callback = null;\n  }\n};\nBufferListStream.prototype._destroy = function _destroy(err, cb) {\n  this._bufs.length = 0;\n  this.length = 0;\n  cb(err);\n};\nBufferListStream.prototype._isBufferList = function _isBufferList(b) {\n  return b instanceof BufferListStream || b instanceof BufferList || BufferListStream.isBufferList(b);\n};\nBufferListStream.isBufferList = BufferList.isBufferList;\nmodule.exports = BufferListStream;\nmodule.exports.BufferListStream = BufferListStream;\nmodule.exports.BufferList = BufferList;","map":{"version":3,"names":["DuplexStream","require","Duplex","inherits","BufferList","BufferListStream","callback","_callback","piper","err","bind","on","onPipe","src","onUnpipe","removeListener","_init","call","Object","assign","prototype","_new","_write","buf","encoding","_appendBuffer","_read","size","length","push","Math","min","slice","consume","end","chunk","_destroy","cb","_bufs","_isBufferList","b","isBufferList","module","exports"],"sources":["/Users/athallenberg/Dropbox/Kandidat/IoT/IoTProject/node_modules/bl/bl.js"],"sourcesContent":["'use strict'\n\nconst DuplexStream = require('readable-stream').Duplex\nconst inherits = require('inherits')\nconst BufferList = require('./BufferList')\n\nfunction BufferListStream (callback) {\n  if (!(this instanceof BufferListStream)) {\n    return new BufferListStream(callback)\n  }\n\n  if (typeof callback === 'function') {\n    this._callback = callback\n\n    const piper = function piper (err) {\n      if (this._callback) {\n        this._callback(err)\n        this._callback = null\n      }\n    }.bind(this)\n\n    this.on('pipe', function onPipe (src) {\n      src.on('error', piper)\n    })\n    this.on('unpipe', function onUnpipe (src) {\n      src.removeListener('error', piper)\n    })\n\n    callback = null\n  }\n\n  BufferList._init.call(this, callback)\n  DuplexStream.call(this)\n}\n\ninherits(BufferListStream, DuplexStream)\nObject.assign(BufferListStream.prototype, BufferList.prototype)\n\nBufferListStream.prototype._new = function _new (callback) {\n  return new BufferListStream(callback)\n}\n\nBufferListStream.prototype._write = function _write (buf, encoding, callback) {\n  this._appendBuffer(buf)\n\n  if (typeof callback === 'function') {\n    callback()\n  }\n}\n\nBufferListStream.prototype._read = function _read (size) {\n  if (!this.length) {\n    return this.push(null)\n  }\n\n  size = Math.min(size, this.length)\n  this.push(this.slice(0, size))\n  this.consume(size)\n}\n\nBufferListStream.prototype.end = function end (chunk) {\n  DuplexStream.prototype.end.call(this, chunk)\n\n  if (this._callback) {\n    this._callback(null, this.slice())\n    this._callback = null\n  }\n}\n\nBufferListStream.prototype._destroy = function _destroy (err, cb) {\n  this._bufs.length = 0\n  this.length = 0\n  cb(err)\n}\n\nBufferListStream.prototype._isBufferList = function _isBufferList (b) {\n  return b instanceof BufferListStream || b instanceof BufferList || BufferListStream.isBufferList(b)\n}\n\nBufferListStream.isBufferList = BufferList.isBufferList\n\nmodule.exports = BufferListStream\nmodule.exports.BufferListStream = BufferListStream\nmodule.exports.BufferList = BufferList\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}