{"ast":null,"code":"var _jsxFileName = \"/Users/athallenberg/Dropbox/Kandidat/IoT/IoTProject/src/App.tsx\",\n  _s = $RefreshSig$();\nimport { DialogContent, DialogActions, DialogTitle, Dialog, Grid, Divider, Paper, Typography, IconButton, TextField, CardHeader, CardContent, Button } from '@mui/material';\nimport AddCircleOutlinedIcon from '@mui/icons-material/AddCircleOutlined';\nimport './App.css';\nimport mqtt from 'mqtt';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst subscribedTopics = [];\nconst receivedImages = [];\n\n// Map<topic, listOfImages>\nconst allReceivedImages = new Map();\nconst url = \"ws://diotp2p.mooo.com:8083\";\nconst options = {\n  port: 8083,\n  host: \"diotp2p.mooo.com\",\n  // clientId: \"peer1\",\n  protocol: 'mqtts',\n  username: \"RainbowDash\",\n  password: \"kw8x5vaTh2kcrSWN\",\n  rejectUnauthorized: false\n};\nconst client = mqtt.connect(url, options);\n\n// bliver kaldt f√∏rst\nfunction uploadImage(topic, files, client) {\n  for (let i = 0; i < files.length; i++) {\n    const file = files.item(i);\n    if (file != null) {\n      const byteArray = getByteArray(file);\n      byteArray.then(value => {\n        // console.log(\"Success: \" + value); // Success!\n        client.publish(\"RainbowDash/\" + topic, value.toString());\n        console.log(\"publishing file to topic: \" + topic);\n        // console.log(\"byte array to string: \" + value.toString());\n        return value.toString;\n      });\n    }\n  }\n}\nasync function getByteArray(file) {\n  //Get file from your input element\n\n  //Wait for the file to be converted to a byteArray\n  const byteArray = await fileToByteArray(file);\n\n  //Do something with the byteArray\n  console.log(byteArray);\n  return byteArray;\n}\nfunction fileToByteArray(file) {\n  return new Promise((resolve, reject) => {\n    try {\n      let reader = new FileReader();\n      let fileByteArray = [];\n      reader.readAsArrayBuffer(file);\n      reader.onloadend = evt => {\n        if (evt.target != null) {\n          if (evt.target.result != null) {\n            if (evt.target.readyState === FileReader.DONE) {\n              let arrayBuffer = evt.target.result,\n                array = new Uint8Array(arrayBuffer);\n              for (let byte of array) {\n                fileByteArray.push(byte);\n              }\n            }\n          }\n        }\n        console.log(\"Promise fileByteToArray: \" + fileByteArray.toString());\n        resolve(fileByteArray);\n      };\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\nfunction convertBackToImage(byteArrayImg) {\n  return \"data:image/jpeg;base64,\" + byteArrayImg;\n}\nfunction convertBackToImg2(byteArrayString) {\n  const arr = new Uint8ClampedArray(40000);\n\n  // Iterate through every pixel\n  for (let i = 0; i < arr.length; i += 4) {\n    arr[i + 0] = 0; // R value\n    arr[i + 1] = 190; // G value\n    arr[i + 2] = 0; // B value\n    arr[i + 3] = 255; // A value\n  }\n\n  // Initialize a new ImageData object\n  let imageData = new ImageData(arr, 200);\n  const header_size = 70;\n  const width = 255;\n  const height = 255;\n  const image_size = width * height * 4;\n  const arr1 = new Uint8Array(header_size + image_size);\n  const view = new DataView(arr1.buffer);\n\n  // File Header\n\n  // BM magic number.\n  view.setUint16(0, 0x424D, false);\n  // File size.\n  view.setUint32(2, arr1.length, true);\n  // Offset to image data.\n  view.setUint32(10, header_size, true);\n\n  // BITMAPINFOHEADER\n\n  // Size of BITMAPINFOHEADER\n  view.setUint32(14, 40, true);\n  // Width\n  view.setInt32(18, width, true);\n  // Height (signed because negative values flip\n  // the image vertically).\n  view.setInt32(22, height, true);\n  // Number of colour planes (colours stored as\n  // separate images; must be 1).\n  view.setUint16(26, 1, true);\n  // Bits per pixel.\n  view.setUint16(28, 32, true);\n  // Compression method, 6 = BI_ALPHABITFIELDS\n  view.setUint32(30, 6, true);\n  // Image size in bytes.\n  view.setUint32(34, image_size, true);\n  // Horizontal resolution, pixels per metre.\n  // This will be unused in this situation.\n  view.setInt32(38, 10000, true);\n  // Vertical resolution, pixels per metre.\n  view.setInt32(42, 10000, true);\n  // Number of colours. 0 = all\n  view.setUint32(46, 0, true);\n  // Number of important colours. 0 = all\n  view.setUint32(50, 0, true);\n\n  // Colour table. Because we used BI_ALPHABITFIELDS\n  // this specifies the R, G, B and A bitmasks.\n\n  // Red\n  view.setUint32(54, 0x000000FF, true);\n  // Green\n  view.setUint32(58, 0x0000FF00, true);\n  // Blue\n  view.setUint32(62, 0x00FF0000, true);\n  // Alpha\n  view.setUint32(66, 0xFF000000, true);\n\n  // Pixel data.\n  for (let w = 0; w < width; ++w) {\n    for (let h = 0; h < height; ++h) {\n      const offset = header_size + (h * width + w) * 4;\n      arr1[offset + 0] = w; // R value\n      arr1[offset + 1] = h; // G value\n      arr1[offset + 2] = 255 - w; // B value\n      arr1[offset + 3] = 255 - h; // A value\n    }\n  }\n\n  const blob = new Blob([arr], {\n    type: \"image/bmp\"\n  });\n  return window.URL.createObjectURL(blob);\n}\n\n// main function (ish)\nfunction App() {\n  _s();\n  const [dialogVisible, setDialogVisible] = useState(false);\n  const [enteredTopic, setEnteredTopic] = useState(\"\");\n\n  // useEffect(() => {\n  // if (client) {\n  client.on('connect', function () {\n    // client.subscribe(\"RainbowDash/#\");\n    console.log(\"Connected to mqtt broker\");\n  });\n  client.on('message', (topic, message) => {\n    console.log(\"message: \" + message);\n    console.log(\"topic: \" + topic);\n    receivedImages.push(message);\n    // save received image somewhere, but only once please\n    const imagesInTopic = allReceivedImages.get(topic);\n    if (imagesInTopic === undefined) {\n      // This is the first message from this topic\n      // create topic and add an array with the image\n      const array = [];\n      array.push(message.toString());\n      allReceivedImages.set(topic, array);\n    } else {\n      // We have previously gotten messages about this topic\n      // Add new image to this topic\n      imagesInTopic.push(message.toString());\n    }\n  });\n  const handleClickToOpen = () => {\n    setDialogVisible(true);\n  };\n  const handleToClose = () => {\n    setDialogVisible(false);\n  };\n  function subscribe(client, topic) {\n    client.subscribe(\"RainbowDash/\" + topic);\n    subscribedTopics.push(topic);\n    console.log(\"Subscribed to: \" + topic);\n    console.log(subscribedTopics.toLocaleString());\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 2,\n      sx: {\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        title: \"Rainbow Dash\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            padding: 1,\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 11,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: \"Subscribed to:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 1,\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: handleClickToOpen,\n                children: /*#__PURE__*/_jsxDEV(AddCircleOutlinedIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            padding: 1,\n            alignItems: \"center\",\n            height: '50px',\n            children: subscribedTopics.map(topic => {\n              console.log(\"Opdated list of subscribed topics\");\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 10,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h5\",\n                    children: topic\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 2,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    onChange: e => e.target.files != null ? uploadImage(topic, e.target.files, client) : null\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: receivedImages.map(array => {\n                    // const img = convertBackToImg2(array);\n                    console.log(\"hello\");\n                    return /*#__PURE__*/_jsxDEV(\"img\", {\n                      id: \"billede\",\n                      src: convertBackToImage(array),\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 254,\n                      columnNumber: 32\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: dialogVisible,\n        onClose: handleToClose,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: \"What to you want to subscribe to?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          sx: {\n            padding: '1'\n          },\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            placeholder: \"Topic\",\n            size: \"small\",\n            onChange: newTopic => setEnteredTopic(newTopic.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: () => subscribe(client, enteredTopic),\n            children: \"Subscribe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleToClose,\n            color: \"primary\",\n            autoFocus: true,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"VF3Z+gKADlRUmkcUvsgT2OiHBJM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["DialogContent","DialogActions","DialogTitle","Dialog","Grid","Divider","Paper","Typography","IconButton","TextField","CardHeader","CardContent","Button","AddCircleOutlinedIcon","mqtt","useState","subscribedTopics","receivedImages","allReceivedImages","Map","url","options","port","host","protocol","username","password","rejectUnauthorized","client","connect","uploadImage","topic","files","i","length","file","item","byteArray","getByteArray","then","value","publish","toString","console","log","fileToByteArray","Promise","resolve","reject","reader","FileReader","fileByteArray","readAsArrayBuffer","onloadend","evt","target","result","readyState","DONE","arrayBuffer","array","Uint8Array","byte","push","e","convertBackToImage","byteArrayImg","convertBackToImg2","byteArrayString","arr","Uint8ClampedArray","imageData","ImageData","header_size","width","height","image_size","arr1","view","DataView","buffer","setUint16","setUint32","setInt32","w","h","offset","blob","Blob","type","window","URL","createObjectURL","App","dialogVisible","setDialogVisible","enteredTopic","setEnteredTopic","on","message","imagesInTopic","get","undefined","set","handleClickToOpen","handleToClose","subscribe","toLocaleString","map","padding","newTopic"],"sources":["/Users/athallenberg/Dropbox/Kandidat/IoT/IoTProject/src/App.tsx"],"sourcesContent":["import { DialogContent, DialogActions, DialogTitle, DialogContentText, Dialog, Grid, Divider, Paper, Typography, IconButton, TextField, CardHeader, CardContent, Button } from '@mui/material';\nimport AddCircleOutlinedIcon from '@mui/icons-material/AddCircleOutlined'; import './App.css';\nimport mqtt, { IClientOptions, MqttClient, IPublishPacket, OnMessageCallback } from 'mqtt';\nimport Popup from 'reactjs-popup';\nimport { useEffect, useState } from 'react';\n\nconst subscribedTopics: string[] = [];\nconst receivedImages: Uint8Array[] = [];\n\n// Map<topic, listOfImages>\nconst allReceivedImages = new Map<string, string[]>();\n\nconst url = \"ws://diotp2p.mooo.com:8083\";\nconst options: IClientOptions = {\n  port: 8083,\n  host: \"diotp2p.mooo.com\",\n  // clientId: \"peer1\",\n  protocol: 'mqtts',\n  username: \"RainbowDash\",\n  password: \"kw8x5vaTh2kcrSWN\",\n  rejectUnauthorized: false\n}\n\nconst client = mqtt.connect(url, options)\n\n// bliver kaldt f√∏rst\nfunction uploadImage(topic: string, files: FileList, client: MqttClient) {\n  for (let i = 0; i < files.length; i++) {\n    const file = files.item(i);\n    if (file != null) {\n      const byteArray = getByteArray(file);\n      byteArray.then(value => {\n        // console.log(\"Success: \" + value); // Success!\n        client.publish(\"RainbowDash/\" + topic, value.toString());\n        console.log(\"publishing file to topic: \" + topic);\n        // console.log(\"byte array to string: \" + value.toString());\n        return value.toString;\n      })\n    }\n  }\n}\n\nasync function getByteArray(file: File) {\n  //Get file from your input element\n\n  //Wait for the file to be converted to a byteArray\n  const byteArray = await fileToByteArray(file);\n\n  //Do something with the byteArray\n  console.log(byteArray);\n  return byteArray;\n}\n\nfunction fileToByteArray(file: any): Promise<Uint8Array> {\n  return new Promise((resolve, reject) => {\n    try {\n      let reader = new FileReader();\n      let fileByteArray: any = [];\n      reader.readAsArrayBuffer(file);\n      reader.onloadend = (evt) => {\n        if (evt.target != null) {\n          if (evt.target.result != null) {\n            if (evt.target.readyState === FileReader.DONE) {\n              let arrayBuffer = evt.target.result,\n                array = new Uint8Array(arrayBuffer as ArrayBuffer);\n              for (let byte of array) {\n                fileByteArray.push(byte);\n              }\n            }\n          }\n        }\n        console.log(\"Promise fileByteToArray: \" + fileByteArray.toString())\n        resolve(fileByteArray);\n      }\n    }\n    catch (e) {\n      reject(e);\n    }\n  })\n}\n\nfunction convertBackToImage(byteArrayImg: Uint8Array) {\n  return \"data:image/jpeg;base64,\" + byteArrayImg;\n}\n\nfunction convertBackToImg2(byteArrayString: Uint8Array) {\n  const arr = new Uint8ClampedArray(40000);\n\n  // Iterate through every pixel\n  for (let i = 0; i < arr.length; i += 4) {\n    arr[i + 0] = 0;    // R value\n    arr[i + 1] = 190;  // G value\n    arr[i + 2] = 0;    // B value\n    arr[i + 3] = 255;  // A value\n  }\n\n  // Initialize a new ImageData object\n  let imageData = new ImageData(arr, 200);\n\n  const header_size = 70;\n\n  const width = 255;\n  const height = 255;\n  const image_size = width * height * 4;\n\n  const arr1 = new Uint8Array(header_size + image_size);\n  const view = new DataView(arr1.buffer);\n\n  // File Header\n\n  // BM magic number.\n  view.setUint16(0, 0x424D, false);\n  // File size.\n  view.setUint32(2, arr1.length, true);\n  // Offset to image data.\n  view.setUint32(10, header_size, true);\n\n  // BITMAPINFOHEADER\n\n  // Size of BITMAPINFOHEADER\n  view.setUint32(14, 40, true);\n  // Width\n  view.setInt32(18, width, true);\n  // Height (signed because negative values flip\n  // the image vertically).\n  view.setInt32(22, height, true);\n  // Number of colour planes (colours stored as\n  // separate images; must be 1).\n  view.setUint16(26, 1, true);\n  // Bits per pixel.\n  view.setUint16(28, 32, true);\n  // Compression method, 6 = BI_ALPHABITFIELDS\n  view.setUint32(30, 6, true);\n  // Image size in bytes.\n  view.setUint32(34, image_size, true);\n  // Horizontal resolution, pixels per metre.\n  // This will be unused in this situation.\n  view.setInt32(38, 10000, true);\n  // Vertical resolution, pixels per metre.\n  view.setInt32(42, 10000, true);\n  // Number of colours. 0 = all\n  view.setUint32(46, 0, true);\n  // Number of important colours. 0 = all\n  view.setUint32(50, 0, true);\n\n  // Colour table. Because we used BI_ALPHABITFIELDS\n  // this specifies the R, G, B and A bitmasks.\n\n  // Red\n  view.setUint32(54, 0x000000FF, true);\n  // Green\n  view.setUint32(58, 0x0000FF00, true);\n  // Blue\n  view.setUint32(62, 0x00FF0000, true);\n  // Alpha\n  view.setUint32(66, 0xFF000000, true);\n\n  // Pixel data.\n  for (let w = 0; w < width; ++w) {\n    for (let h = 0; h < height; ++h) {\n      const offset = header_size + (h * width + w) * 4;\n      arr1[offset + 0] = w;     // R value\n      arr1[offset + 1] = h;     // G value\n      arr1[offset + 2] = 255-w; // B value\n      arr1[offset + 3] = 255-h; // A value\n    }\n  }\n\n  const blob = new Blob([arr], { type: \"image/bmp\" });\n  return window.URL.createObjectURL(blob);\n\n}\n\n// main function (ish)\nfunction App(): JSX.Element {\n  const [dialogVisible, setDialogVisible] = useState(false);\n  const [enteredTopic, setEnteredTopic] = useState(\"\");\n\n  // useEffect(() => {\n  // if (client) {\n  client.on('connect', function () {\n    // client.subscribe(\"RainbowDash/#\");\n    console.log(\"Connected to mqtt broker\")\n  });\n\n  client.on('message', (topic, message) => {\n    console.log(\"message: \" + message);\n    console.log(\"topic: \" + topic);\n    receivedImages.push(message);\n    // save received image somewhere, but only once please\n    const imagesInTopic = allReceivedImages.get(topic)\n    if (imagesInTopic === undefined) {\n      // This is the first message from this topic\n      // create topic and add an array with the image\n      const array: string[] = [];\n      array.push(message.toString())\n      allReceivedImages.set(topic, array);\n    } else {\n      // We have previously gotten messages about this topic\n      // Add new image to this topic\n      imagesInTopic.push(message.toString());\n    }\n  })\n\n\n  const handleClickToOpen = () => {\n    setDialogVisible(true);\n  };\n\n  const handleToClose = () => {\n    setDialogVisible(false);\n  };\n\n  function subscribe(client: MqttClient, topic: string) {\n    client.subscribe(\"RainbowDash/\" + topic);\n    subscribedTopics.push(topic);\n    console.log(\"Subscribed to: \" + topic);\n    console.log(subscribedTopics.toLocaleString());\n  }\n\n  return (\n    <div className='App'>\n      <Paper elevation={2} sx={{ width: \"100%\" }}>\n        <CardHeader title={\"Rainbow Dash\"}></CardHeader>\n        <CardContent>\n          <>\n            <Divider />\n            <Grid container padding={1} alignItems='center'>\n              <Grid item xs={11}>\n                <Typography variant='body2'>Subscribed to:</Typography>\n              </Grid>\n              <Grid item xs={1}>\n                <IconButton size='small' onClick={handleClickToOpen}>\n                  <AddCircleOutlinedIcon />\n                </IconButton>\n              </Grid>\n            </Grid>\n            <Divider />\n            <Grid container padding={1} alignItems='center' height={'50px'}>\n              {subscribedTopics.map((topic) => {\n                console.log(\"Opdated list of subscribed topics\")\n                return (\n                  <>\n                    <Grid item xs={10}>\n                      <Typography variant='h5'>{topic}</Typography>\n                    </Grid>\n                    <Grid item xs={2}>\n                      <input type='file' onChange={(e) => e.target.files != null ? uploadImage(topic, e.target.files, client) : null} />\n                    </Grid>\n                    <Grid item xs={12}>\n                      {receivedImages.map((array) => {\n                        // const img = convertBackToImg2(array);\n                        console.log(\"hello\")\n                        return <img id='billede' src={convertBackToImage(array)} alt='' />\n                      }\n                      )}\n                    </Grid>\n                    <Grid item xs={12}>\n                      <Divider />\n                    </Grid>\n                  </>)\n              })}\n            </Grid>\n          </>\n        </CardContent>\n\n        <Dialog open={dialogVisible} onClose={handleToClose}>\n          <DialogTitle>{\"What to you want to subscribe to?\"}</DialogTitle>\n          <DialogContent sx={{ padding: '1' }}>\n            <TextField placeholder='Topic' size='small' onChange={(newTopic) => setEnteredTopic(newTopic.target.value)} />\n            <Button variant='contained' onClick={() => subscribe(client, enteredTopic)}>\n              Subscribe\n            </Button>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleToClose}\n              color=\"primary\" autoFocus>\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n      </Paper>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}