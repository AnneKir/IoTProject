{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst reflect_1 = require(\"../util/reflect\");\nfunction orderBy(from, orderby) {\n  while (!orderby.empty()) {\n    let c = orderby.unstack();\n    from = from.sort((a, b) => {\n      let sort;\n      if (typeof a[c.field] === 'number' || a[c.field] instanceof Date) sort = c.direction.toLowerCase() === 'asc' ? a[c.field] - b[c.field] : b[c.field] - a[c.field];\n      if (typeof a[c.field] === 'string') sort = c.direction.toLowerCase() === 'asc' ? a[c.field].localeCompare(b[c.field]) : b[c.field].localeCompare(a[c.field]);\n      if (typeof a[c.field] === 'object') {\n        let aPropertiesMap;\n        let bPropertiesMap;\n        aPropertiesMap = reflect_1.getObjectMap(a[c.field], '');\n        bPropertiesMap = reflect_1.getObjectMap(b[c.field], '');\n        let aCount = 0;\n        let bCount = 0;\n        aPropertiesMap.keySet().toArray().forEach(key => {\n          if (typeof aPropertiesMap.get(key) === 'number') aPropertiesMap.get(key) - bPropertiesMap.get(key) > 0 ? bCount++ : aCount++;\n          if (typeof aPropertiesMap.get(key) === 'string') sort = aPropertiesMap.get(key).localeCompare(bPropertiesMap.get(key)) > 0 ? bCount++ : aCount++;\n        });\n        sort = c.direction.toLowerCase() === 'asc' ? aCount > bCount ? 1 : -1 : aCount > bCount ? -1 : 1;\n      }\n      return sort;\n    });\n  }\n  return from;\n}\nexports.orderBy = orderBy;","map":{"version":3,"mappings":";;;;;AAEA;AAEA,iBAAwBA,IAAS,EAAEC,OAA2B;EAE1D,OAAO,CAACA,OAAO,CAACC,KAAK,EAAE,EAAE;IACrB,IAAIC,CAAC,GAAgBF,OAAO,CAACG,OAAO,EAAE;IACtCJ,IAAI,GAAGA,IAAI,CAACK,IAAI,CAAC,CAACC,CAAM,EAAEC,CAAM,KAAI;MAEhC,IAAIF,IAAS;MAEb,IAAI,OAAOC,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,KAAK,QAAQ,IAAIF,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,YAAYC,IAAI,EAC5DJ,IAAI,GAAGF,CAAC,CAACO,SAAS,CAACC,WAAW,EAAE,KAAK,KAAK,GAAGL,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,GAAGD,CAAC,CAACJ,CAAC,CAACK,KAAK,CAAC,GAAGD,CAAC,CAACJ,CAAC,CAACK,KAAK,CAAC,GAAGF,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC;MAElG,IAAI,OAAOF,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,KAAK,QAAQ,EAC9BH,IAAI,GAAGF,CAAC,CAACO,SAAS,CAACC,WAAW,EAAE,KAAK,KAAK,GAAGL,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,CAACI,aAAa,CAACL,CAAC,CAACJ,CAAC,CAACK,KAAK,CAAC,CAAC,GAAGD,CAAC,CAACJ,CAAC,CAACK,KAAK,CAAC,CAACI,aAAa,CAACN,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,CAAC;MAE5H,IAAI,OAAOF,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,KAAK,QAAQ,EAAE;QAChC,IAAIK,cAA4C;QAChD,IAAIC,cAA4C;QAEhDD,cAAc,GAAGE,sBAAY,CAACT,CAAC,CAACH,CAAC,CAACK,KAAK,CAAC,EAAE,EAAE,CAAC;QAC7CM,cAAc,GAAGC,sBAAY,CAACR,CAAC,CAACJ,CAAC,CAACK,KAAK,CAAC,EAAE,EAAE,CAAC;QAE7C,IAAIQ,MAAM,GAAW,CAAC;QACtB,IAAIC,MAAM,GAAW,CAAC;QAEtBJ,cAAc,CAACK,MAAM,EAAE,CAACC,OAAO,EAAE,CAACC,OAAO,CAAEC,GAAW,IAAI;UACtD,IAAI,OAAOR,cAAc,CAACS,GAAG,CAACD,GAAG,CAAC,KAAK,QAAQ,EAClCR,cAAc,CAACS,GAAG,CAACD,GAAG,CAAC,GAAWP,cAAc,CAACQ,GAAG,CAACD,GAAG,CAAC,GAAI,CAAC,GAAGJ,MAAM,EAAE,GAAGD,MAAM,EAAE;UAEjG,IAAI,OAAOH,cAAc,CAACS,GAAG,CAACD,GAAG,CAAC,KAAK,QAAQ,EAC3ChB,IAAI,GAAYQ,cAAc,CAACS,GAAG,CAACD,GAAG,CAAE,CAACT,aAAa,CAASE,cAAc,CAACQ,GAAG,CAACD,GAAG,CAAC,CAAC,GAAG,CAAC,GAAGJ,MAAM,EAAE,GAAGD,MAAM,EAAE;QACzH,CAAC,CAAC;QAEFX,IAAI,GAAGF,CAAC,CAACO,SAAS,CAACC,WAAW,EAAE,KAAK,KAAK,GAAGK,MAAM,GAAGC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC,GAAGD,MAAM,GAAGC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC;;MAGpG,OAAOZ,IAAI;IACf,CAAC,CAAC;;EAEN,OAAOL,IAAI;AACf;AAvCAuB","names":["from","orderby","empty","c","unstack","sort","a","b","field","Date","direction","toLowerCase","localeCompare","aPropertiesMap","bPropertiesMap","reflect_1","aCount","bCount","keySet","toArray","forEach","key","get","exports"],"sources":["../../../src/tsQ/order-by/order-by.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}