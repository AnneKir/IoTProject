{"ast":null,"code":"import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function exhaustMap(project, resultSelector) {\n  if (resultSelector) {\n    return function (source) {\n      return source.pipe(exhaustMap(function (a, i) {\n        return innerFrom(project(a, i)).pipe(map(function (b, ii) {\n          return resultSelector(a, b, i, ii);\n        }));\n      }));\n    };\n  }\n  return operate(function (source, subscriber) {\n    var index = 0;\n    var innerSub = null;\n    var isComplete = false;\n    source.subscribe(createOperatorSubscriber(subscriber, function (outerValue) {\n      if (!innerSub) {\n        innerSub = createOperatorSubscriber(subscriber, undefined, function () {\n          innerSub = null;\n          isComplete && subscriber.complete();\n        });\n        innerFrom(project(outerValue, index++)).subscribe(innerSub);\n      }\n    }, function () {\n      isComplete = true;\n      !innerSub && subscriber.complete();\n    }));\n  });\n}","map":{"version":3,"mappings":"AAGA,SAASA,GAAG,QAAQ,OAAO;AAC3B,SAASC,SAAS,QAAQ,yBAAyB;AACnD,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,wBAAwB,QAAQ,sBAAsB;AA8D/D,OAAM,SAAUC,UAAU,CACxBC,OAAuC,EACvCC,cAA6G;EAE7G,IAAIA,cAAc,EAAE;IAElB,OAAO,UAACC,MAAqB;MAC3B,aAAM,CAACC,IAAI,CAACJ,UAAU,CAAC,UAACK,CAAC,EAAEC,CAAC;QAAK,gBAAS,CAACL,OAAO,CAACI,CAAC,EAAEC,CAAC,CAAC,CAAC,CAACF,IAAI,CAACR,GAAG,CAAC,UAACW,CAAM,EAAEC,EAAO;UAAK,qBAAc,CAACH,CAAC,EAAEE,CAAC,EAAED,CAAC,EAAEE,EAAE,CAAC;QAA3B,CAA2B,CAAC,CAAC;MAApF,CAAoF,CAAC,CAAC;IAAvH,CAAuH;;EAE3H,OAAOV,OAAO,CAAC,UAACK,MAAM,EAAEM,UAAU;IAChC,IAAIC,KAAK,GAAG,CAAC;IACb,IAAIC,QAAQ,GAAyB,IAAI;IACzC,IAAIC,UAAU,GAAG,KAAK;IACtBT,MAAM,CAACU,SAAS,CACdd,wBAAwB,CACtBU,UAAU,EACV,UAACK,UAAU;MACT,IAAI,CAACH,QAAQ,EAAE;QACbA,QAAQ,GAAGZ,wBAAwB,CAACU,UAAU,EAAEM,SAAS,EAAE;UACzDJ,QAAQ,GAAG,IAAI;UACfC,UAAU,IAAIH,UAAU,CAACO,QAAQ,EAAE;QACrC,CAAC,CAAC;QACFnB,SAAS,CAACI,OAAO,CAACa,UAAU,EAAEJ,KAAK,EAAE,CAAC,CAAC,CAACG,SAAS,CAACF,QAAQ,CAAC;;IAE/D,CAAC,EACD;MACEC,UAAU,GAAG,IAAI;MACjB,CAACD,QAAQ,IAAIF,UAAU,CAACO,QAAQ,EAAE;IACpC,CAAC,CACF,CACF;EACH,CAAC,CAAC;AACJ","names":["map","innerFrom","operate","createOperatorSubscriber","exhaustMap","project","resultSelector","source","pipe","a","i","b","ii","subscriber","index","innerSub","isComplete","subscribe","outerValue","undefined","complete"],"sources":["../../../../src/internal/operators/exhaustMap.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}